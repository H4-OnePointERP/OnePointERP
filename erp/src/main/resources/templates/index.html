<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>로그인 예시</title>
    <!-- Foundation CSS 파일 링크 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.5/css/foundation.min.css">
</head>
<body>
<h1>로그인 예시</h1>
<!-- 폼을 감싸는 .row 요소에 .align-center 클래스 추가 -->
<div class="row align-center">
    <!-- 폼의 너비를 결정하는 .column 요소에 .small-centered 클래스 추가 -->
    <div class="column small-centered medium-6 large-4">
        <form id="login-form" action="/login" method="post">
            <!-- Foundation Form 컴포넌트 사용 -->
            <div class="grid-container">
                <div class="grid-x grid-padding-x">
                    <div class="medium-6 cell">
                        <label for="id">아이디:</label>
                        <input type="text" id="id" name="id" placeholder="아이디를 입력하세요">
                    </div>
                    <div class="medium-6 cell">
                        <label for="password">패스워드:</label>
                        <input type="password" id="password" name="password" placeholder="패스워드를 입력하세요">
                    </div>
                </div>
                <div class="grid-x grid-padding-x">
                    <div class="medium-12 cell">
                        <button type="submit" class="button">로그인</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- 로그인 폼을 제출할 때 Ajax 요청을 보내고 응답을 처리하는 코드입니다 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- jQuery 파일 추가 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.5/js/foundation.min.js"></script> <!-- Foundation JS 파일 추가 -->
<script>
    $(document).ready(function(){
        // 로그인 폼의 submit 이벤트를 잡아서 Ajax 요청을 보냅니다
        $("#login-form").submit(function(event){
            // 폼의 기본 동작을 막습니다 (새로고침 등)
            event.preventDefault();
            // 폼의 데이터를 JSON 형식으로 만듭니다
            var formData = {
                id: $("#id").val(),
                password: $("#password").val()
            };

// JSON 객체를 문자열로 인코딩합니다
            var formDataString = JSON.stringify(formData);
            // Ajax 요청을 보냅니다
            $.ajax({
                url: "/login", // 요청 URL
                type: "POST", // 요청 방식
                data: formDataString,
                contentType: "application/json", // 요청 데이터의 타입
                dataType: "json",// 응답 데이터의 타입은 text입니다
                success: function(response) { // 요청이 성공적으로 처리되면
                    console.log(response)
                    // 응답 데이터가 "로그인 성공"이면 main.do로 이동합니다
                    if (response) {
                        window.location.href = "/main.do";
                    } else { // 그렇지 않으면 로그인 실패 alert을 보여줍니다
                        alert("로그인 실패");
                    }
                }
            });
        });
    });
</script>
</body>
</html>
